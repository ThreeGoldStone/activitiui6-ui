<div class="modal" ng-controller="BpmResultsetPopupCtrl">
    <div class="modal-dialog modal-wide" style="width: 80%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;
                </button>
                <h3>{{'PROPERTY.PROPERTY.EDIT.TITLE' | translate}} "{{property.title | translate}}"</h3>
            </div>
            <div class="modal-body">

                <div class="row row-no-gutter">
                    <div class="col-xs-6" style="width: 30%">
                        <div ng-if="translationsRetrieved" class="kis-listener-grid" style="height:500px;"
                             ui-grid="gridOptions"
                             ui-grid-selection></div>
                        <div class="pull-right">
                            <div class="btn-group">
                                <a class="btn btn-icon btn-lg" rel="tooltip"
                                   data-title="{{'ACTION.MOVE.UP' | translate}}" data-placement="bottom"
                                   data-original-title="" title="" ng-click="moveFieldUp()"><i
                                        class="glyphicon glyphicon-arrow-up"></i></a>
                                <a class="btn btn-icon btn-lg" rel="tooltip"
                                   data-title="{{'ACTION.MOVE.DOWN' | translate}}" data-placement="bottom"
                                   data-original-title="" title="" ng-click="moveFieldDown()"><i
                                        class="glyphicon glyphicon-arrow-down"></i></a>
                            </div>
                            <div class="btn-group">
                                <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{'ACTION.ADD' | translate}}"
                                   data-placement="bottom" data-original-title="" title="" ng-click="addNewField()"><i
                                        class="glyphicon glyphicon-plus"></i></a>
                                <a class="btn btn-icon btn-lg" rel="tooltip"
                                   data-title="{{'ACTION.REMOVE' | translate}}" data-placement="bottom"
                                   data-original-title="" title="" ng-click="removeField()"><i
                                        class="glyphicon glyphicon-minus"></i></a>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-6" style="width: 30%">
                        <div ng-show="selectedField">

                            <div class="form-group">
                                <label>名称</label>
                                <input type="text" class="form-control" ng-model="selectedField.name"
                                       placeholder="{{'PROPERTY.FIELDS.NAME.PLACEHOLDER' | translate}}"/>
                            </div>
                            <div class="form-group">
                                <label>取值路径</label>
                                <input type="text" class="form-control" ng-model="selectedField.valuePath"
                                       placeholder="{{'PROPERTY.FIELDS.NAME.PLACEHOLDER' | translate}}"/>
                            </div>
                            <div>
                                <label>取值样例</label>
                                <pre style="height: fit-content;"
                                     class="form-control">{{selectedField.templateValue | json}}</pre>
                            </div>
                            <!--<button ng-click="changeAllOpenStatus(true);">全部展开</button>-->
                            <!--<button ng-click="changeAllOpenStatus(false);">全部关闭</button>-->
                            <!--<div style="overflow-y:auto; overflow-x:auto; height:400px;">-->
                            <!--<tree-view tree-data="requestParamTree" text-field="name" value-field='id'-->
                            <!--item-clicked="itemClicked($item)"-->
                            <!--item-checked-changed="itemCheckedChanged($item)"-->
                            <!--can-checked="true"></tree-view>-->
                            <!--</div>-->

                        </div>
                        <div ng-show="!selectedField" class="muted no-property-selected" translate>
                            PROPERTY.FIELDS.EMPTY
                        </div>
                    </div>
                    <div class="col-xs-6" style="width: 40%">
                        <h4>返回参数</h4>
                        <button ng-click="changeAllOpenStatus(true);">全部展开</button>
                        <button ng-click="changeAllOpenStatus(false);">全部关闭</button>
                        <div class="form-control"
                             style="overflow-y:auto; overflow-x:auto; height:500px; margin-top:20px;">
                            <tree-view tree-data="requestParamTree" text-field="name" value-field='id'
                                       item-clicked="itemClicked($item)"
                                       item-checked-changed="itemCheckedChanged($item)"
                                       can-checked="true"></tree-view>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button ng-click="cancel()" class="btn btn-primary" translate>ACTION.CANCEL</button>
                <button ng-click="save()" class="btn btn-primary" translate>ACTION.SAVE</button>
            </div>
        </div>
    </div>
</div>
